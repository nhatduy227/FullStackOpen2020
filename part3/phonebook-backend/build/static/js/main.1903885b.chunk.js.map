{"version":3,"sources":["service/service.js","components/Person.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","delete","put","Person","person","handleDelete","className","name","number","onClick","Persons","filter","persons","filteredPersons","map","Notification","message","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","setFilteredPersons","notificationMessage","setNotificationMessage","useEffect","personService","then","response","data","console","log","notification","error","value","onChange","event","target","filtered","toLowerCase","includes","preventDefault","nameObject","length","setTimeout","personName","personNumber","personID","i","alert","window","confirm","catch","p","concat","type","find","ReactDOM","render","document","getElementById"],"mappings":"0NACMA,EAAU,cAkBD,EAhBA,WACb,OAAOC,IAAMC,IAAIF,IAeJ,EAZA,SAAAG,GACb,OAAOF,IAAMG,KAAKJ,EAASG,IAWd,EATA,SAACE,GACZ,OAAOJ,IAAMK,OAAN,UAAgBN,EAAhB,YAA2BK,KAQvB,EALA,SAACA,EAAIF,GAClB,OAAOF,IAAMM,IAAN,UAAaP,EAAb,YAAwBK,GAAMF,ICHxBK,EAVA,SAAC,GAAD,IAAGC,EAAH,EAAGA,OAAQC,EAAX,EAAWA,aAAX,OACb,sBAAKC,UAAU,SAAf,UACE,sBAAMA,UAAU,eAAhB,SAAgCF,EAAOG,OACvC,sBAAMD,UAAU,iBAAhB,SAAkCF,EAAOI,SACzC,wBAAQF,UAAU,SAASG,QAAS,kBAAMJ,EAAaD,EAAOJ,KAA9D,wBCiBWU,EApBC,SAAC,GAAD,IAAGC,EAAH,EAAGA,OAAQC,EAAX,EAAWA,QAASC,EAApB,EAAoBA,gBAAiBR,EAArC,EAAqCA,aAArC,OACd,qBAAKC,UAAU,UAAf,SACc,KAAXK,EAAA,OACGC,QADH,IACGA,OADH,EACGA,EAASE,KAAI,SAAAV,GAAM,OACjB,cAAC,EAAD,CAEEA,OAAQA,EACRC,aAAcA,GAFTD,EAAOG,SAHnB,OAQGM,QARH,IAQGA,OARH,EAQGA,EAAiBC,KAAI,SAAAV,GAAM,OACzB,cAAC,EAAD,CAEEA,OAAQA,EACRC,aAAcA,GAFTD,EAAOG,YCJTQ,EATM,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,QAASV,EAAgB,EAAhBA,UAE/B,OAAe,MAAXU,EACK,KAGF,qBAAKV,UAAWA,EAAhB,SAA4BU,KCqLtBC,G,MAvLH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTN,EADS,KACAO,EADA,OAEcD,mBAAS,IAFvB,mBAETE,EAFS,KAEAC,EAFA,OAGkBH,mBAAS,IAH3B,mBAGTI,EAHS,KAGEC,EAHF,OAIYL,mBAAS,IAJrB,mBAITP,EAJS,KAIDa,EAJC,OAK8BN,mBAASN,GALvC,mBAKTC,EALS,KAKQY,EALR,OAMsCP,mBAAS,MAN/C,mBAMTQ,EANS,KAMYC,EANZ,KAShBC,qBAAU,WACRC,IAAuBC,MAAK,SAACC,GAC3BZ,EAAWY,EAASC,SAEtBC,QAAQC,IAAI,qBACX,IAyHH,OACE,uBAAM5B,UAAU,YAAhB,UACE,2CACA,cAAC,EAAD,CACEU,SACqB,OAAnBU,QAAmB,IAAnBA,OAAA,EAAAA,EAAqBS,gBAArB,OAAqCT,QAArC,IAAqCA,OAArC,EAAqCA,EAAqBU,OAE5D9B,WAA8B,OAAnBoB,QAAmB,IAAnBA,OAAA,EAAAA,EAAqBS,cAAe,eAAiB,UAElE,oDACoB,IAClB,uBAAOE,MAAO1B,EAAQL,UAAU,QAAQgC,SApBnB,SAACC,GAC1Bf,EAAUe,EAAMC,OAAOH,OACvB,IAAMI,EAAW7B,EAAQD,QAAO,SAACP,GAAD,OAC9BA,EAAOG,KAAKmC,cAAcC,SAASJ,EAAMC,OAAOH,MAAMK,kBAExDjB,EAAmBgB,SAiBjB,2CACA,iCACE,wCACQ,IACN,uBACEnC,UAAU,QACV+B,MAAOjB,EACPkB,SAnCe,SAACC,GACxBlB,EAAWkB,EAAMC,OAAOH,aAqCpB,0CACU,IACR,uBACEA,MAAOf,EACPhB,UAAU,QACVgC,SAxCiB,SAACC,GAC1BhB,EAAagB,EAAMC,OAAOH,aA0CtB,8BACE,wBAAQ/B,UAAU,gBAAgBG,QAtJ1B,SAAC8B,GACfA,EAAMK,iBACN,IAAMC,EAAa,CACjBtC,KAAMa,EACNZ,OAAQc,GAIV,GAAgB,KAAZF,EAAJ,CAIA,GAAIE,EAAUwB,OAAS,EAOrB,OANAnB,EAAuB,CACrBS,MAAM,GAAD,OAAKd,EAAL,wEAEPyB,YAAW,WACTpB,EAAuB,QACtB,KAIL,GAAIP,EAAQ0B,OAAS,EAOnB,OANAnB,EAAuB,CACrBS,MAAM,GAAD,OAAKhB,EAAL,sEAEP2B,YAAW,WACTpB,EAAuB,QACtB,KAQL,IAHA,IAAMqB,EAAapC,EAAQE,KAAI,SAACV,GAAD,OAAYA,EAAOG,QAC5C0C,EAAerC,EAAQE,KAAI,SAACV,GAAD,OAAYA,EAAOI,UAC9C0C,EAAWtC,EAAQE,KAAI,SAACV,GAAD,OAAYA,EAAOJ,MAnCvB,WAoChBmD,GACP,OAAIH,EAAWG,KAAO/B,GAAW6B,EAAaE,KAAO7B,GACnD8B,MAAM,GAAD,OAAIhC,EAAJ,mCACC,CAAN,WACS4B,EAAWG,KAAO/B,GAAW6B,EAAaE,KAAO7B,EAC1C+B,OAAOC,QAAP,UACXlC,EADW,6EAIdS,EAAqBqB,EAASC,GAAIN,GAAYf,MAAK,SAACC,GAClDZ,EACEP,EAAQE,KAAI,SAACV,GAAD,OACVA,EAAOJ,KAAOkD,EAASC,GAAK/C,EAAS2B,EAASC,SAGlDL,EAAuB,CACrBQ,aAAa,sBAAD,OAAwBf,KAEtC2B,YAAW,WACTpB,EAAuB,QACtB,KACHN,EAAW,IACXE,EAAa,OAEdgC,OAAM,SAACnB,GACNT,EAAuB,CACrBS,MAAM,mBAAD,OAAqBhB,EAArB,2CAEPD,EAAWP,EAAQD,QAAO,SAAC6C,GAAD,OAAOA,EAAExD,KAAOkD,EAASC,OACnDJ,YAAW,WACTpB,EAAuB,QACtB,QAEC,CAAN,YAEAM,QAAQC,IAAI,kBACN,CAAN,gBAhCG,GAJAiB,EAAI,EAAGA,EAAIH,EAAWF,OAAQK,IAAK,CAAC,IAAD,IAAnCA,GAAmC,kCAwC5CtB,EAAqBgB,GAAYf,MAAK,SAACC,GACrCZ,EAAWP,EAAQ6C,OAAO1B,EAASC,OACnCX,EAAW,IACXE,EAAa,OAEfI,EAAuB,CACrBQ,aAAa,GAAD,OAAKf,EAAL,wBAEd2B,YAAW,WACTpB,EAAuB,QACtB,OAgEuD+B,KAAK,SAAzD,sBAKJ,yCACA,cAAC,EAAD,CACE/C,OAAQA,EACRC,QAASA,EACTC,gBAAiBA,EACjBR,aAvEe,SAACL,GACpB,IAAMI,EAASQ,EAAQ+C,MAAK,SAACH,GAAD,OAAOA,EAAExD,KAAOA,KACtBqD,OAAOC,QAAP,iBAAyBlD,EAAOG,KAAhC,OAEpBsB,EAAqB7B,GAAI8B,MAAK,WAE5B,IAAMjB,EAAkBD,EAAQD,QAAO,SAACP,GAAD,OAAYA,EAAOJ,KAAOA,KACjEmB,EAAWN,GAGXW,EAAU,eCrHlBoC,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.1903885b.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = 'api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\nconst remove = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject);\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getAll, create, remove, update };","import React from \"react\";\r\n\r\nconst Person = ({ person, handleDelete }) => (\r\n  <div className=\"person\">\r\n    <span className=\"person--name\">{person.name}</span>\r\n    <span className=\"person--number\">{person.number}</span>\r\n    <button className=\"button\" onClick={() => handleDelete(person.id)}>\r\n      Delete\r\n    </button>\r\n  </div>\r\n);\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./Person\";\r\n\r\nconst Persons = ({ filter, persons, filteredPersons, handleDelete }) => (\r\n  <div className=\"persons\">\r\n    {filter === \"\"\r\n      ? persons?.map(person => (\r\n          <Person\r\n            key={person.name}\r\n            person={person}\r\n            handleDelete={handleDelete}\r\n          />\r\n        ))\r\n      : filteredPersons?.map(person => (\r\n          <Person\r\n            key={person.name}\r\n            person={person}\r\n            handleDelete={handleDelete}\r\n          />\r\n        ))}\r\n  </div>\r\n);\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, className }) => {\r\n  // Check for null or undefined with == instead of ===\r\n  if (message == null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className={className}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./service/service\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport \"./App.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [filteredPersons, setFilteredPersons] = useState(persons);\n  const [notificationMessage, setNotificationMessage] = useState(null);\n\n  // fetch data once web page started\n  useEffect(() => {\n    personService.getAll().then((response) => {\n      setPersons(response.data);\n    });\n    console.log(\"numbers updated\");\n  }, []);\n\n  // Utils functions\n  const addName = (event) => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    };\n\n    // Name is blank -> do nothing\n    if (newName === \"\") {\n      return;\n    }\n\n    if (newNumber.length < 8) {\n      setNotificationMessage({\n        error: `${newNumber} is too short, please provide a number with at least 8 digits`,\n      });\n      setTimeout(() => {\n        setNotificationMessage(null);\n      }, 5000);\n      return;\n    }\n\n    if (newName.length < 3) {\n      setNotificationMessage({\n        error: `${newName} is too short, please provide a name with at least 3 digits`,\n      });\n      setTimeout(() => {\n        setNotificationMessage(null);\n      }, 5000);\n      return;\n    }\n\n    // Update number\n    const personName = persons.map((person) => person.name);\n    const personNumber = persons.map((person) => person.number);\n    const personID = persons.map((person) => person.id);\n    for (let i = 0; i < personName.length; i++) {\n      if (personName[i] === newName && personNumber[i] === newNumber) {\n        alert(`${newName} is already added to phonebook`);\n        return;\n      } else if (personName[i] === newName && personNumber[i] !== newNumber) {\n        const confirm = window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one ?`\n        );\n        if (confirm) {\n          personService.update(personID[i], nameObject).then((response) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== personID[i] ? person : response.data\n              )\n            );\n            setNotificationMessage({\n              notification: `Updated number for ${newName}`,\n            });\n            setTimeout(() => {\n              setNotificationMessage(null);\n            }, 5000);\n            setNewName(\"\");\n            setNewNumber(\"\");\n          })\n          .catch((error) => {\n            setNotificationMessage({\n              error: `Information for ${newName} has already been removed from server`,\n            });\n            setPersons(persons.filter((p) => p.id !== personID[i]));\n            setTimeout(() => {\n              setNotificationMessage(null);\n            }, 5000);\n          });\n          return;\n        } else {\n          console.log(\"Cancel clicked\");\n          return;\n        }\n      }\n    }\n    personService.create(nameObject).then((response) => {\n      setPersons(persons.concat(response.data));\n      setNewName(\"\");\n      setNewNumber(\"\");\n    });\n    setNotificationMessage({\n      notification: `${newName} added to database`,\n    });\n    setTimeout(() => {\n      setNotificationMessage(null);\n    }, 5000);\n    return;\n  };\n  const handleDelete = (id) => {\n    const person = persons.find((p) => p.id === id);\n    const confirmDelete = window.confirm(`Delete ${person.name}?`);\n    if (confirmDelete) {\n      personService.remove(id).then(() => {\n        //Update state --> filter out deleted person\n        const filteredPersons = persons.filter((person) => person.id !== id);\n        setPersons(filteredPersons);\n\n        // reset filter\n        setFilter(\"\");\n      });\n    }\n  };\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value);\n    const filtered = persons.filter((person) =>\n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\n    );\n    setFilteredPersons(filtered);\n  };\n\n  // Html front-end\n  return (\n    <main className=\"container\">\n      <h2>Phonebook</h2>\n      <Notification\n        message={\n          notificationMessage?.notification || notificationMessage?.error\n        }\n        className={notificationMessage?.notification ? \"notification\" : \"error\"}\n      />\n      <div>\n        Filter shown with{\" \"}\n        <input value={filter} className=\"input\" onChange={handleFilterChange} />\n      </div>\n      <h3>Add a new</h3>\n      <form>\n        <div>\n          Name:{\" \"}\n          <input\n            className=\"input\"\n            value={newName}\n            onChange={handleNameChange}\n          />\n        </div>\n        <div>\n          Number:{\" \"}\n          <input\n            value={newNumber}\n            className=\"input\"\n            onChange={handleNumberChange}\n          />\n        </div>\n        <div>\n          <button className=\"button submit\" onClick={addName} type=\"submit\">\n            Add\n          </button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n      <Persons\n        filter={filter}\n        persons={persons}\n        filteredPersons={filteredPersons}\n        handleDelete={handleDelete}\n      />\n    </main>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}